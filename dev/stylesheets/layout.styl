/******************************************************************************/
/* General ********************************************************************/

html
body
main
  height  100%
  width   100%

body
  &.no-scroll
  &.no-scroll main
    overflow hidden

/******************************************************************************/
/* Main sections **************************************************************/

section
  display   block
  position  relative
  width     100%
  margin    100% 0
  padding   step(25)
  fix3d()
    
  &.section--intro
    height 100%
    margin 0

.section--title
  margin-bottom step(30)


@media screen and (min-width $tabletPortrait['width'])
  section
    padding step(50)

  .section--title
    margin-top    step(250)
    margin-bottom step(420)

  .section--description
    width         60%
    margin-bottom step(90)


/* Section 00 *****************************************************************/

.section--intro
  overflow hidden //hides :after diagonale

  + section
    margin-top 90%


// Wrapper
.section--00--wrapper
  verticalAlign(-78%)
  //transition transform $t-reg ease-out    
  
  @media screen and (min-height ($phoneLandscape['height']+1)) 
  // ————————————————————————————————————————— portrait mobile
    verticalAlign(-39%)

  @media screen and (min-width $tabletPortrait['width'])
    verticalAlign(-60%)  


// Components
.logo--component
  display block
  horizontalAlign(0, $step*2)

.logo--image
  width   $logo-image-size_mobile
  height  @width
  @media screen and (orientation portrait)
    width   $logo-image-size
    height  @width

.logo--name
  width   250px
  height  32px

.baseline
  width 90%
  horizontalAlign()

  strong
    display block


@media screen and (min-width $tabletPortrait['width'])
  .logo--image
    width   $logo-image-size_tablet
    height  @width

  .logo--name
    width   350px
    height  45px


@media screen and (min-width $tabletLandscape['width'])
  .logo
    display   block
    position  relative
    width     $logo-wrapper-size_laptop
    horizontalAlign()

  .logo--image
    float         left
    width         $logo-image-size_laptop
    height        @width
    margin-bottom 0

  .logo--name
    margin      0
    width       450px
    height      76px
    padding-top 16px

  .baseline
    width       auto
    margin-left $logo-image-size_laptop
    margin-top  12px

/* Section 04 *****************************************************************/

.reference--list
  horizontalAlign(0, $step*16)
  padding-top $step*16
  font-size   0
  line-height normal

  $$mq2-min = (($section-padding * 2) - $diamond-interval + ($diamond-size + $diamond-interval) * 2)px
  $$mq3-min = (($section-padding * 2) - $diamond-interval + ($diamond-size + $diamond-interval) * 3)px
  $$mq4-min = (($section-padding-large * 2) - $diamond-interval + ($diamond-size + $diamond-interval) * 4)px

  @media screen and (max-width ($$mq2-min - 1))
    max-width $diamond-size + ($diamond-diagonale / 2)

  @media screen and (min-width $$mq2-min) and (max-width ($$mq3-min - 1))
    max-width (($diamond-size + $diamond-interval) * 2) - $diamond-interval

  @media screen and (min-width $$mq3-min) and (max-width ($$mq4-min - 1))
    max-width (($diamond-size + $diamond-interval) * 3) - $diamond-interval

  @media screen and (min-width $$mq4-min)
    max-width (($diamond-size + $diamond-interval) * 4) - $diamond-interval


  .reference--item
    
    // cf. values.styl

    list-style    none
    display       inline-block
    margin-right  $diamond-interval
    

    @media screen and (max-width ($$mq2-min - 1))
      margin-right $diamond-interval

      &:nth-child(odd)
        margin-right 0
        margin-left ($diamond-diagonale / 2)

      &:nth-child(n+1)
        margin-top $diamond-row-yoffset

    
    @media screen and (min-width $$mq2-min) and (max-width ($$mq3-min - 1))
      &:nth-child(3n+3)
        margin-left $diamond-row-xoffset
      
      &:nth-child(3n+2)
        margin-right 0
        
      &:nth-child(n+2)
        margin-top $diamond-row-yoffset


    @media screen and (min-width $$mq3-min) and (max-width ($$mq4-min - 1))
      &:nth-child(5n+4)
        margin-left $diamond-row-xoffset
      
      &:nth-child(5n+3)
        margin-right 0
        
      &:nth-child(n+3)
        margin-top $diamond-row-yoffset


    @media screen and (min-width $$mq4-min)
      &:nth-child(7n+5)
        margin-left $diamond-row-xoffset
      
      &:nth-child(7n+4)
        margin-right 0
        
      &:nth-child(n+4)
        margin-top $diamond-row-yoffset

    a
    .reference--content
    .reference--item-layer
      height  $diamond-size
      width   @height
    a
      position  relative
      display   block
      overflow  hidden
      transform rotate(45deg)
      font-size 16px

    .reference--item-layer
      position  absolute
      display   block
      transform rotate(45deg)

    .reference--content
      display         table-cell
      vertical-align  middle
      text-align      center
      transform       rotate(-45deg)

/******************************************************************************/
/* Modal **********************************************************************/

.modal--link-open
  position  fixed
  top       20px
  right     @top
  z-index   1

.modal
  position          fixed
  top               0
  left              0
  right             0
  bottom            0
  opacity           0
  overflow          hidden
  pointer-events    none
  z-index           1

  &.is-visible
    opacity         1
    pointer-events  auto


/******************************************************************************/
/* Carousel  ******************************************************************/

.modal

  .carousel--wrapper
    height 100%

    .carousel--shutter
      position          fixed
      overflow          hidden
      transform-origin  0% 0%

      .carousel--flap
        transform-origin  0% 0%

      &.carousel--shutter-ne
        width     200%
        height    @width*2
        transform rotate(-45deg) // translateX(-1px)

        .carousel--flap
          width     200%
          height    @width*2
          transform translate3d(@width/2,0,0)
          
        &:before
          fakeContent()
          width 1px
          height 400%
          background-color white
          transform translate3d(0,-@height/4,1px)

      &.carousel--shutter-sw
        width     200%
        height    @width
        transform rotate(45deg) //translateY(-1px) 

        .carousel--flap
          width     200%
          height    @width
          transform translate3d(0,@width/2,0)

    &.shutter-toggle
      .carousel--shutter
        &:before
          transform translate3d(0,-90%,1px)
        .carousel--flap
          transform translate3d(0,0,0)


  .carousel--translate
    width   100%
    height  100%
    overflow scroll
    -webkit-overflow-scrolling: touch; 

  .carousel--reference
    float     left
    position  relative
    height    100%
    width     100vw
    z-index   1


/******************************************************************************/
/* Reference  *****************************************************************/



// Header
.header--top
  padding $step*2 $step*4

  .logo--image
    float   none
    height  50px
    width   @height

  .close
    position  absolute
    top       20px
    right     @top



// Reference : Wrappers

.template--references
.template--references main
  height auto
  @media screen and (min-width ($tabletPortrait['width'])) and (min-height $tabletLandscape['height'])
    height 100%

.reference
  padding $step*5
  
  @media screen and (min-width $tabletPortrait['width'])
    padding $step*16
  


// Reference : Content

.reference--logo
  horizontalAlign($step*3, $step*8)
  
  img
    display     block
    height      auto
    width       auto
    max-height  step(60)
    max-width   80%
    horizontalAlign()
  
  .template--references &
    img
      horizontalAlign(5%, 5%)
      

@media screen and (min-width $tabletPortrait['width']) and (max-width $laptop['max-width'])

  .reference--logo
    display   inline
    max-width 40%
    margin    10% 0 10%
    float     right

  .reference--description
    width         60%
    margin-bottom step(90)
    clear         right
    

@media screen and (min-width $laptop['min-width'])
      
  .reference--logo-wrapper
  .reference--description-wrapper
    display table
    float left
    width 50%
    height 100%
    
  .reference--description
  .reference--logo
    display table-cell
    vertical-align middle
  
  .reference--logo
    img
      max-height  inherit
      max-width   40%
      margin      0
      
  .reference--description
    padding 0 $step*12
    



// Reference : Navigation

.reference--nav
  margin-top  $step*20
  overflow    hidden
  
  &.reference--nav-inner
    display block

  &.reference--nav-outer
    display none
    padding $step*10
    
    .modal &
      position  absolute
      right     0
      bottom    0
      left      0  
  
  @media screen and (min-width ($tabletPortrait['width'])) and (min-height $tabletLandscape['height'])
    // @extend .modal .reference--nav !
    position  absolute
    right     0
    bottom    0
    left      0
    
    &.reference--nav-inner
      display none

    &.reference--nav-outer
      display block



.reference--nav-control
  display inline-block
  padding 0

  a
  span
    display         table-cell
    height          $step*8
    width           @height
    vertical-align  middle

  &.reference--nav-prev
    float left

  &.reference--nav-next
    float right
    
  &.reference--nav-close
    position    absolute
    left        50%
    margin-left -($step*8/2)
    
    @media screen and (min-width $laptop['min-width'])
      position fixed
      top step(50)
      right step(50)
      left auto
      margin-left 0

    

