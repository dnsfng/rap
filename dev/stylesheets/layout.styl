/******************************************************************************/
/* General ********************************************************************/

html
body
main
  height  100%
  width   100%

body
  &.no-scroll
  &.no-scroll main
    overflow hidden 
    
body
  -webkit-overflow-scrolling: touch;


/* Less Than IE10 ********************************************************************/  

.lt-ie10
  
  body
    overflow hidden

  section
    display none
    
    @media screen and (max-width $laptop['max-width'])
     &.section--intro
       display block

  .browsehappy--wrapper
    position fixed
    z-index 20
    width 100%
    height 100%
    
  .browsehappy--disclaimer
    position absolute
    bottom 10%
    width 100%
    margin 0 auto
    
  .nextSection--arrowWrapper
    .nextSection--arrow
      
      &:before
        right 0%
        
      &:after
        left 0%


/* Mail icon ********************************************************************/

.mail--wrapper
  position  fixed
  top       $paddingViewport-mobile
  right     @top
  width     40px
  height    @width
  display   block
  fix3d()
  will-change opacity
  
  .mail--icon
    position  absolute
    width     100%
    height    100%
  
  // @media screen and (min-width $laptop['min-width'])
  //   top   $paddingViewport-tablet
  //   right @top
    




/* logo mini icon ********************************************************************/

.logoSymbol--wrapper
  position  fixed
  top       17px
  left      @top
  width     70px
  height    @width
  display   block
  fix3d()
  will-change transform, opacity
  
  @media screen and (min-width em(420))
    top       $paddingViewport-mobile
    left      @top
    

  .logo--icon
    position  absolute
    width     100%
    height    100%
  
  // @media screen and (min-width $laptop['min-width'])
  //   top   $paddingViewport-tablet
  //   left  @top
    
      

/******************************************************************************/
/* Main sections **************************************************************/

section
  display         block
  position        relative
  width           100%
  margin-top      -100%
  // padding         $paddingViewport-mobile
  padding-top     90%
  padding-bottom  100%
  padding-left    $paddingViewport-mobile
  padding-right   @padding-left
  fix3d()

  @media screen and (max-width $laptop['max-width'])
    z-index 1 !important
    


  
.section--title--wrapper
.section--description
  padding 0
  
  @media screen and (min-width em(420)) and (max-width $laptop['max-width'])
    padding 0 10%

  @media screen and (min-width em(600)) and (max-width $laptop['max-width'])
    padding 0 13%
    
  @media screen and (min-width em(960)) and (max-width $laptop['max-width'])
    padding 0 15%
    
  @media screen and (min-width em(1080)) and (max-width $laptop['max-width'])
    padding 0 20%


.section--title
  margin-bottom step(30)

  
// @media screen and (min-width $phoneLandscape['width']) and (max-width $tabletPortrait['width'])
//   section
//     background-color green !important
    
//     &.section--text
//       width 200%
//       height 50%
//       margin 0
//       transform-origin 0% 0%
//       transform rotate(45deg)
      
//     .section--title
      

// @media screen and (min-width $tabletPortrait['width']) and (max-width $laptop['max-width'])
//   section
//     padding $paddingViewport-tablet
    
//   .section--title
//     margin-top    step(250)
//     margin-bottom step(420)
    
//   .section--description
//     width         60%
//     margin-bottom step(90)


@media screen and (min-width $laptop['min-width'])
  section
    height     50%
    margin-top 0
    padding    $paddingViewport-tablet
      
    .js &
      position  fixed
      height    100%
      margin    0
        

    .section--wrapper
      display   table
      height    100%
      
        
    .section--title--wrapper
    .section--description
      display         table-cell
      height          100%
      width           40%
      position        relative
      vertical-align  middle
      
      .js &
        opacity 1 //todo
      
    .section--title
      float left

    .section--description
      width   60%
      padding 0 $step*16 0 $step*16

    &.section--image
      pointer-events none
    
    &.section--references 
      .section--wrapper
        display inline-block
           
      .section--title--wrapper
        display block
        pointer-events none
        
      .section--title
        verticalAlign()
        
@media screen and (min-width $desktop)
  section
    .section--description
      padding 0 $step*32 0 0
      




/* Section 00 *****************************************************************/

.section--intro
  overflow hidden //hides :after diagonale
  padding 0
  height 100%
  margin 0

  + section
    margin-top -10%
    @media screen and (min-width $laptop['min-width'])
      .js &
        margin-top 0
        


// Wrapper
.section--intro
  .section--wrapper
    display block
    height  auto
    verticalAlign(-78%)
    //transition transform $t-reg ease-out    
    
    @media screen and (min-height ($phoneLandscape['height']+1)) 
    // ————————————————————————————————————————— portrait mobile
      verticalAlign(-39%)

    @media screen and (min-width $tabletPortrait['width'])
      verticalAlign(-60%)  
      
    @media screen and (min-width $laptop['min-width'])
      display none
      transform none
      top 0
      left 0
      height 100%



// Components
.logo--component
  display block
  horizontalAlign(0, $step*2)


.logo--image
  width             $logo-image-size_mobile
  height            @width
  @media screen and (orientation portrait)
    width   $logo-image-size
    height  @width


.logo--name
  width   250px
  height  32px


.logo--baseline
  display none


.baseline
  width 90%
  horizontalAlign()

  strong
    display block

    
// logo duplicata to fix z-index style on laptop viewport
.logo--wrapper.logo
  display         none
  pointer-events  none


@media screen and (min-width $tabletPortrait['width'])
  .logo--image
    width   $logo-image-size_tablet
    height  @width

  .logo--name
    width   350px
    height  45px
  
  


@media screen and (min-width $tabletLandscape['width'])
  .logo
    display   block
    position  relative
    width     $logo-wrapper-size_laptop
    horizontalAlign()
    will-change opacity


  .logo--image
    float         left
    width         $logo-image-size_laptop
    height        @width
    margin-bottom 0


  .logo--name
    margin      0
    width       auto
    height      $step*15
    padding-top 17px


  .baseline
    width       auto
    margin-left $logo-image-size_laptop
    margin-top  12px
    



@media screen and (min-width $laptop['min-width'])

  // hides the one used inside the introduction section

  .logo
    top     50vh
    left    50vh
    width   calc(100% - 90vh)
    margin  -100px 0 0 -100px
    
    // shows the one outside
    .logo--wrapper&
      display   block
      position  fixed
    

  .logo--image
    width   22%
    height  @width
    

  .logo--baseline
    display     block
    margin      0
    width       78%
    height      auto
    padding-top 3%
    
  .logo--name
  .baseline
    display none



/* Section 03 *****************************************************************/

.section--image
  // margin-top -90%

  .section--wrapper
    position relative
  // margin-top -100vw
  // height 300vw
  
  // @media screen and (min-width $laptop['min-width'])
  //   margin-top 0
  //   height 100%




/* Section 04 *****************************************************************/


.section--references
  margin-top -100%
  padding 90% $paddingViewport-mobile 0
  
  @media screen and (min-width $laptop['min-width'])
    padding   $paddingViewport-tablet
    transform none;




.reference--list
  horizontalAlign(0, $step*16)
  padding-top $step*16
  font-size   0
  line-height normal

  $$mq2-min = (($section-padding * 2) - $diamond__interval + ($diamond__size + $diamond__interval) * 2)px
  $$mq3-min = (($section-padding * 2) - $diamond__interval + ($diamond__size + $diamond__interval) * 3)px
  $$mq4-min = (($section-padding-large * 2) - $diamond__interval + ($diamond__size + $diamond__interval) * 4)px

  @media screen and (max-width ($$mq2-min - 1))
    max-width $diamond__size + ($diamond__diagonal / 2)

  @media screen and (min-width $$mq2-min) and (max-width ($$mq3-min - 1))
    max-width (($diamond__size + $diamond__interval) * 2) - $diamond__interval

  @media screen and (min-width $$mq3-min) and (max-width ($$mq4-min - 1))
    max-width (($diamond__size + $diamond__interval) * 3) - $diamond__interval

  @media screen and (min-width $$mq4-min) and (max-width $laptop['max-width'])
    max-width (($diamond__size + $diamond__interval) * 4) - $diamond__interval
    
  @media screen and (min-width $laptop['min-width'])
    .js &
      $marginTop = 0.5 * ($diamond__size-large * 3)

      width             1920px
      position          absolute
      top               50vh
      left              "calc(50vh - %s)" % $marginTop
      margin            (- $marginTop) 0 0 ($diamond__diagonal-large/2)
      padding           0
      
  @media screen and (min-width $desktop)
    .js &
      $marginTop = 0.5 * ($diamond__size-xlarge * 3)
      top               50vh
      left              "calc(50vh - %s)" % $marginTop
      margin            (- $marginTop) 0 0 ($diamond__diagonal-xlarge/2)
      


  .reference--item
    
    // cf. values.styl

    list-style    none
    display       inline-block
    margin-right  $diamond__interval
    

    @media screen and (max-width ($$mq2-min - 1))
      margin-right $diamond__interval

      &:nth-child(odd)
        margin-right 0
        margin-left ($diamond__diagonal / 2)

      &:nth-child(n+1)
        margin-top $diamond__row-yoffset

    
    @media screen and (min-width $$mq2-min) and (max-width ($$mq3-min - 1))
      &:nth-child(3n+3)
        margin-left $diamond__row-xoffset
      
      &:nth-child(3n+2)
        margin-right 0
        
      &:nth-child(n+2)
        margin-top $diamond__row-yoffset


    @media screen and (min-width $$mq3-min) and (max-width ($$mq4-min - 1))
      &:nth-child(5n+4)
        margin-left $diamond__row-xoffset
      
      &:nth-child(5n+3)
        margin-right 0
        
      &:nth-child(n+3)
        margin-top $diamond__row-yoffset


    @media screen and (min-width $$mq4-min) and (max-width $laptop['max-width'])
      &:nth-child(7n+5)
        margin-left $diamond__row-xoffset
      
      &:nth-child(7n+4)
        margin-right 0
        
      &:nth-child(n+4)
        margin-top $diamond__row-yoffset
        
        
    @media screen and (min-width $laptop['min-width'])
      margin-right $diamond__interval-large
      display block
      float left
      
      //todo
      &:nth-child(4)
        margin-left $diamond__row-xoffset-large
        
      &:nth-child(7)
        margin-left ($diamond__row-xoffset-large * 2) - 0.5
        
      &:nth-child(10)
        margin-left ($diamond__row-xoffset-large * 3) - 0.5

      &:nth-child(3n+4)
        clear left
              
      &:nth-child(n+4)
        margin-top $diamond__row-yoffset-large + 0.5
        

    @media screen and (min-width $desktop)
      margin-right $diamond__interval-xlarge
      
      
      //todo
      &:nth-child(4)
        margin-left $diamond__row-xoffset-xlarge
        
      &:nth-child(7)
        margin-left ($diamond__row-xoffset-xlarge * 2) - 0.5
        
      &:nth-child(10)
        margin-left ($diamond__row-xoffset-xlarge * 3) - 0.5

      &:nth-child(3n+4)
        clear left
              
      &:nth-child(n+4)
        margin-top $diamond__row-yoffset-xlarge + 0.5
      


    a
    .reference--content
    .reference--itemLayer
      height  $diamond__size
      width   @height
      @media screen and (min-width $laptop['min-width'])
        .js &
          height  $diamond__size-large
          width   @height
      @media screen and (min-width $desktop)
        .js &
          height  $diamond__size-xlarge
          width   @height
          



    a
      position  relative
      display   block
      overflow  hidden
      transform rotate(45deg) translate3d(0,0,0)
      font-size 16px

    .reference--itemLayer
      position  absolute
      display   block
      transform rotate(45deg) translate3d(0,0,0)

    .reference--content
      display         table-cell
      vertical-align  middle
      text-align      center
      transform       rotate(-45deg) translate3d(0,0,0)
      
    .reference--content-image
      @media screen and (min-width $laptop['min-width'])
        width $diamond__size-large
        height @width * 0.3237
        margin 0 auto
      @media screen and (min-width $desktop)
        width $diamond__size-xlarge
        height @width * 0.3237
      



.section__references--pattern
  .js &
    @media screen and (min-width $laptop['min-width'])
      width     400%
      height    1000%
      position  fixed
      top 50vh
      left 50vh
      margin (- ($diamond__diagonal-large * 5)) 0 0 (- ($diamond__diagonal-large*5))
      transform-origin 0 0
      transform rotate(-45deg)
      background transparent url("/_assets/i/__ref_diamond_pattern.svg") repeat 1px 1px
      background-size 179px 179px
      
      @media screen and (min-height em(380))
        height 800%
        
      @media screen and (min-height em(580))
        height 600%
        
      @media screen and (min-height em(880))
        height 400%
        
        
    @media screen and (min-width $desktop)
      margin (- ($diamond__diagonal-xlarge * 5) - 13) 0 0 (- ($diamond__diagonal-xlarge*5) - 13)
      background-size 229px 229px
      
    
      

      

